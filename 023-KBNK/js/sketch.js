// Generated by CoffeeScript 2.4.1
var BK, COLORS, WB, WK, WN, draw, dump, index, moves, paint, range, setup;

range = _.range;

moves = 'Kf6 Nf7 Bf5 Kf8 Bh7 Ke8 Ke6 Kf8 Kf6 Ke8 Ne5 Kd8 Ke6 Kc7 Nd7 Kb7 Bd3 Kc6 Bc4 Kc7 Bd5 Kd8 Kd6 Ke8 Be6 Kd8 Bf7 Kc8 Nc5 Kd8 Nb7 Kc8 Kc6 Kb8 Kb6 Kc8 Be6 Kb8 Nc5 Ka8 Bf5 Kb8 Na6 Ka8 Be4'.split(' ');

dump = [];

index = 0;

COLORS = {
  K: '#000',
  W: '#fff',
  R: '#f00',
  G: '#0f0',
  D: '#330',
  L: '#660'
};

WK = [-1, -1];

WN = [-1, -1];

WB = [-1, -1];

BK = [-1, -1];

setup = function() {
  var color, i, j, k, l, len, len1, len2, m, ref, ref1, ref2;
  dump.push("# White Mates with Bishop (green) and Knight (red)");
  dump.push('D = (48,48,0)');
  dump.push('L = (96,96,0)');
  dump.push('a = Animation()');
  createCanvas(400, 400);
  frameRate(100);
  ref = range(8);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    ref1 = range(8);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      j = ref1[l];
      if ((i + j) % 2 === 0) {
        color = "D";
      } else {
        color = "L";
      }
      fill(COLORS[color]);
      rect(50 * i, 50 * j, 50, 50);
    }
  }
  ref2 = range(4);
  for (m = 0, len2 = ref2.length; m < len2; m++) {
    i = ref2[m];
    dump.push(`m[${2 * i + 0}] = [D,L,D,L,D,L,D,L]`);
    dump.push(`m[${2 * i + 1}] = [L,D,L,D,L,D,L,D]`);
  }
  return dump.push('a.add_frame(m,2000)');
};

paint = function(piece, file, rank, color) {
  var bgcol, x, y;
  [x, y] = piece;
  if (x !== -1) { // remove old piece
    if ((x + y) % 2 === 0) {
      bgcol = "D";
    } else {
      bgcol = "L";
    }
    fill(COLORS[bgcol]);
    dump.push(`m[${x}][${y}] = ${bgcol}`);
    rect(50 * x, 50 * y, 50, 50);
  }
  // put new piece
  fill(COLORS[color]);
  rect(50 * file, 50 * rank, 50, 50);
  dump.push(`m[${file}][${rank}] = ${color}`);
  dump.push('a.add_frame(m,2000)');
  return [file, rank];
};

draw = function() {
  var file, move, piece, rank;
  index = frameCount - 1;
  if (index >= moves.length) {
    return;
  }
  move = moves[index];
  piece = move[0];
  file = 'abcdefgh'.indexOf(move[1]);
  rank = 7 - '12345678'.indexOf(move[2]);
  if (piece === 'K' && index % 2 === 0) {
    WK = paint(WK, file, rank, 'W');
  }
  if (piece === 'K' && index % 2 === 1) {
    BK = paint(BK, file, rank, 'K');
  }
  if (piece === 'N') {
    WN = paint(WN, file, rank, 'R');
  }
  if (piece === 'B') {
    WB = paint(WB, file, rank, 'G');
  }
  if (index === moves.length - 1) {
    return console.log(dump.join('\n'));
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQTs7QUFBQSxLQUFBLEdBQVEsQ0FBQyxDQUFDOztBQUVWLEtBQUEsR0FBUSxxTEFBcUwsQ0FBQyxLQUF0TCxDQUE0TCxHQUE1TDs7QUFDUixJQUFBLEdBQU87O0FBRVAsS0FBQSxHQUFROztBQUVSLE1BQUEsR0FBUztFQUFDLENBQUEsRUFBRSxNQUFIO0VBQVUsQ0FBQSxFQUFFLE1BQVo7RUFBbUIsQ0FBQSxFQUFFLE1BQXJCO0VBQTRCLENBQUEsRUFBRSxNQUE5QjtFQUFxQyxDQUFBLEVBQUUsTUFBdkM7RUFBOEMsQ0FBQSxFQUFFO0FBQWhEOztBQUVULEVBQUEsR0FBSyxDQUFDLENBQUMsQ0FBRixFQUFJLENBQUMsQ0FBTDs7QUFDTCxFQUFBLEdBQUssQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFDLENBQUw7O0FBQ0wsRUFBQSxHQUFLLENBQUMsQ0FBQyxDQUFGLEVBQUksQ0FBQyxDQUFMOztBQUNMLEVBQUEsR0FBSyxDQUFDLENBQUMsQ0FBRixFQUFJLENBQUMsQ0FBTDs7QUFFTCxLQUFBLEdBQVEsUUFBQSxDQUFBLENBQUE7QUFDUCxNQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7RUFBQSxJQUFJLENBQUMsSUFBTCxDQUFVLG9EQUFWO0VBQ0EsSUFBSSxDQUFDLElBQUwsQ0FBVSxlQUFWO0VBQ0EsSUFBSSxDQUFDLElBQUwsQ0FBVSxl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RUFBUyxJQUFULEVBQWMsSUFBZCxFQUFtQixHQUFuQixFQUF6Qzs7RUFDQSxJQUFHLEtBQUEsS0FBUyxHQUFULElBQWlCLEtBQUEsR0FBTSxDQUFOLEtBQVMsQ0FBN0I7SUFBb0MsRUFBQSxHQUFLLEtBQUEsQ0FBTSxFQUFOLEVBQVMsSUFBVCxFQUFjLElBQWQsRUFBbUIsR0FBbkIsRUFBekM7O0VBQ0EsSUFBRyxLQUFBLEtBQVMsR0FBWjtJQUFxQixFQUFBLEdBQUssS0FBQSxDQUFNLEVBQU4sRUFBUyxJQUFULEVBQWMsSUFBZCxFQUFtQixHQUFuQixFQUExQjs7RUFDQSxJQUFHLEtBQUEsS0FBUyxHQUFaO0lBQXFCLEVBQUEsR0FBSyxLQUFBLENBQU0sRUFBTixFQUFTLElBQVQsRUFBYyxJQUFkLEVBQW1CLEdBQW5CLEVBQTFCOztFQUNBLElBQUcsS0FBQSxLQUFTLEtBQUssQ0FBQyxNQUFOLEdBQWEsQ0FBekI7V0FBZ0MsT0FBTyxDQUFDLEdBQVIsQ0FBWSxJQUFJLENBQUMsSUFBTCxDQUFVLElBQVYsQ0FBWixFQUFoQzs7QUFYTSIsInNvdXJjZXNDb250ZW50IjpbInJhbmdlID0gXy5yYW5nZVxyXG5cclxubW92ZXMgPSAnS2Y2IE5mNyBCZjUgS2Y4IEJoNyBLZTggS2U2IEtmOCBLZjYgS2U4IE5lNSBLZDggS2U2IEtjNyBOZDcgS2I3IEJkMyBLYzYgQmM0IEtjNyBCZDUgS2Q4IEtkNiBLZTggQmU2IEtkOCBCZjcgS2M4IE5jNSBLZDggTmI3IEtjOCBLYzYgS2I4IEtiNiBLYzggQmU2IEtiOCBOYzUgS2E4IEJmNSBLYjggTmE2IEthOCBCZTQnLnNwbGl0ICcgJ1xyXG5kdW1wID0gW11cclxuXHJcbmluZGV4ID0gMCBcclxuXHJcbkNPTE9SUyA9IHtLOicjMDAwJyxXOicjZmZmJyxSOicjZjAwJyxHOicjMGYwJyxEOicjMzMwJyxMOicjNjYwJ31cclxuXHJcbldLID0gWy0xLC0xXVxyXG5XTiA9IFstMSwtMV1cclxuV0IgPSBbLTEsLTFdXHJcbkJLID0gWy0xLC0xXVxyXG5cclxuc2V0dXAgPSAoKSAtPlxyXG5cdGR1bXAucHVzaCBcIiMgV2hpdGUgTWF0ZXMgd2l0aCBCaXNob3AgKGdyZWVuKSBhbmQgS25pZ2h0IChyZWQpXCJcclxuXHRkdW1wLnB1c2ggJ0QgPSAoNDgsNDgsMCknXHJcblx0ZHVtcC5wdXNoICdMID0gKDk2LDk2LDApJ1xyXG5cdGR1bXAucHVzaCAnYSA9IEFuaW1hdGlvbigpJ1xyXG5cdGNyZWF0ZUNhbnZhcyA0MDAsNDAwXHJcblx0ZnJhbWVSYXRlIDEwMFxyXG5cdGZvciBpIGluIHJhbmdlIDhcclxuXHRcdGZvciBqIGluIHJhbmdlIDhcclxuXHRcdFx0aWYgKGkraiklMiA9PSAwIHRoZW4gY29sb3IgPSBcIkRcIiBlbHNlIGNvbG9yID0gXCJMXCJcclxuXHRcdFx0ZmlsbCBDT0xPUlNbY29sb3JdXHJcblx0XHRcdHJlY3QgNTAqaSw1MCpqLDUwLDUwXHJcblx0Zm9yIGkgaW4gcmFuZ2UgNFxyXG5cdFx0ZHVtcC5wdXNoIFwibVsjezIqaSswfV0gPSBbRCxMLEQsTCxELEwsRCxMXVwiXHJcblx0XHRkdW1wLnB1c2ggXCJtWyN7MippKzF9XSA9IFtMLEQsTCxELEwsRCxMLERdXCJcclxuXHRkdW1wLnB1c2ggJ2EuYWRkX2ZyYW1lKG0sMjAwMCknXHJcblx0XHRcdFxyXG5wYWludCA9IChwaWVjZSxmaWxlLHJhbmssY29sb3IpIC0+XHJcblx0W3gseV0gPSBwaWVjZVxyXG5cdGlmIHggIT0gLTEgIyByZW1vdmUgb2xkIHBpZWNlXHJcblx0XHRpZiAoeCt5KSUyID09IDAgdGhlbiBiZ2NvbCA9IFwiRFwiIGVsc2UgYmdjb2wgPSBcIkxcIlxyXG5cdFx0ZmlsbCBDT0xPUlNbYmdjb2xdXHJcblx0XHRkdW1wLnB1c2ggXCJtWyN7eH1dWyN7eX1dID0gI3tiZ2NvbH1cIlxyXG5cdFx0cmVjdCA1MCp4LDUwKnksNTAsNTBcclxuXHJcblx0IyBwdXQgbmV3IHBpZWNlXHJcblx0ZmlsbCBDT0xPUlNbY29sb3JdXHJcblx0cmVjdCA1MCpmaWxlLDUwKnJhbmssNTAsNTBcclxuXHRkdW1wLnB1c2ggXCJtWyN7ZmlsZX1dWyN7cmFua31dID0gI3tjb2xvcn1cIlxyXG5cdGR1bXAucHVzaCAnYS5hZGRfZnJhbWUobSwyMDAwKSdcclxuXHRbZmlsZSxyYW5rXVxyXG5cclxuZHJhdyA9ICgpIC0+XHJcblx0aW5kZXggPSBmcmFtZUNvdW50LTFcclxuXHRpZiBpbmRleCA+PSBtb3Zlcy5sZW5ndGggdGhlbiByZXR1cm5cclxuXHRtb3ZlID0gbW92ZXNbaW5kZXhdXHJcblx0cGllY2UgPSBtb3ZlWzBdXHJcblx0ZmlsZSA9ICdhYmNkZWZnaCcuaW5kZXhPZiBtb3ZlWzFdXHJcblx0cmFuayA9IDctJzEyMzQ1Njc4Jy5pbmRleE9mIG1vdmVbMl1cclxuXHRpZiBwaWVjZSA9PSAnSycgYW5kIGluZGV4JTI9PTAgdGhlbiBXSyA9IHBhaW50IFdLLGZpbGUscmFuaywnVydcclxuXHRpZiBwaWVjZSA9PSAnSycgYW5kIGluZGV4JTI9PTEgdGhlbiBCSyA9IHBhaW50IEJLLGZpbGUscmFuaywnSydcclxuXHRpZiBwaWVjZSA9PSAnTicgdGhlbiBXTiA9IHBhaW50IFdOLGZpbGUscmFuaywnUidcclxuXHRpZiBwaWVjZSA9PSAnQicgdGhlbiBXQiA9IHBhaW50IFdCLGZpbGUscmFuaywnRydcclxuXHRpZiBpbmRleCA9PSBtb3Zlcy5sZW5ndGgtMSB0aGVuIGNvbnNvbGUubG9nIGR1bXAuam9pbiAnXFxuJ1xyXG4iXX0=
//# sourceURL=c:\Lab\2020\023-KBNK\coffee\sketch.coffee